using UnityEngine;

namespace Game.Scripts
{
	public class StairBuilder : MonoBehaviour
	{
		public class ANCXUA
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
	
			public class HjcoskxCJsi
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class Josxjicw2
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
	
			public class KLxkop3c
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
	
			public class Chxocka4
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class lkxjCJis5
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
	
			public class Pôciks6
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class oivpxcoiv7
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class Ocjisj8x
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class HCuskjxci9
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class kjcivJCis10
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class kjcivJCis10Chix
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class JXCikas2
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class Jcisoxklc3
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class Chuxjsoa4c
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
	
			public class Hisjcax5
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
		}
	
		public class Kcisjhuwkakxc
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
			public class Chusoxizc1
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class uythjgnbv2
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class ghdf3
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
			public class tefgdv4x
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
		}
		public class Fsacvbsfgh
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class hxjiaJXiakw
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class hcizxjjHUAw
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class Kxijaicuas
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class KJCiajkx
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class CHuaix
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
			public class KJCiajkx
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
		}
		public class CHusx
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
			public class KJCiajkx
			{
				private int buaquadi;
				private string chusx;
				public float gmac;
				private double mciajx;

				public int getX()
				{
					return buaquadi;
				}
			}
		}
		public class HCuskx
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class hcusix
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class ANCXUAHCuskawo
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class ANCXUAchuskwjkax
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class ANlxclpakcv4kaoxc
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		public class OjkcisjKc5
		{
			private int buaquadi;
			private string chusx;
			public float gmac;
			private double mciajx;

			public int getX()
			{
				return buaquadi;
			}
		}
		[SerializeField]private GameObject stairObj;
		[SerializeField]private int stairnum;
		private Vector3 currentPosition=Vector3.zero;
		public Vector3 offset;
		public float timeOffset;
		private float timeToGenerate;
		private bool inBuildMode;
		public AudioSource stairBuildSound;
		Vector3 playerRotation;
		public static StairBuilder instance;
		//Refernces 
		void Awake(){
			if(instance==null){
				instance=this;
			}else if(instance!=this){
				Destroy(this.gameObject);

			}

		}

		// Start is called before the first frame update
		void Start()
		{
			stairBuildSound=GetComponent<AudioSource>();
			playerRotation=PlayerController.instance.getPlayerAngles();
		}

		// Update is called once per frame
		void LateUpdate()
		{
			switch(GameManager.instance.state){
				case GameManager.GameState.play :
					if(Input.GetMouseButtonDown(0)){
						if(hasEnoughChild()){
							PlayerController.instance.build(true);
							currentPosition=PlayerController.instance.getPlayerPos();
							PlayerController.instance.setStaticPos(currentPosition+offset);
							generateStare();

						}
        
					}
					else if(Input.GetMouseButton(0)){
						if(hasEnoughChild()){
							PlayerController.instance.build(true);
							if(Time.time>timeOffset+timeToGenerate){
								inBuildMode=true;
								generateStare();
								timeToGenerate=Time.time;
							}
						}else
							PlayerController.instance.build(false);

					}
					else if(Input.GetMouseButtonUp(0)){
						inBuildMode=false;
						PlayerController.instance.build(false);
						PlayerController.instance.jump();

					}
					break;
			}
  
		}
		private void generateStare(){
			for(int i=0;i<stairnum;i++){
				stairBuildSound.Play();
				PlayerController.instance.setStaticPos(currentPosition+offset);
				GameObject v=Instantiate(stairObj,currentPosition,PlayerController.instance.getPlayerRotation(),this.transform);
				Vector3 e=PlayerController.instance.getPlayerAngles();

				print(e);
				v.transform.eulerAngles=e;
				currentPosition+=offset;
				BreakStocker.instance.deleteBrick();
    		
			}

		}

		private bool hasEnoughChild(){
			int  n=BreakStocker.instance.stairChildCount();
			if(n>1)
				return true;
			else 
				return false;

    
		}
		public bool isBuildingStair(){
			return inBuildMode;

		}
		public void updateOffset(){
			offset=new Vector3(-.5f,.5f,0);
		}
    
	}
}
